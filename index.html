<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flow Game ‚Äì Intro</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-image: url('background.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }

    .overlay {
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.3), rgba(255, 255, 255, 0.1));
      min-height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      transition: opacity 0.3s ease-in-out;
    }

    .overlay.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .overlay.fade-in {
      opacity: 1;
      pointer-events: auto;
    }

    .game-container {
      background-image: url('container-background.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 800px;
      width: 100%;
      padding: 30px;
      text-align: center;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: fadeIn 1s ease-in-out;
      max-height: 90vh;
      overflow-y: auto;
      will-change: transform, opacity;
      transform: translateZ(0);
    }

    .logo {
      background-image: url('logo.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      width: 240px;
      height: 240px;
      margin: 0 auto 20px;
    }

    .start-button {
      background-image: url('startbutton.png');
      background-size: cover;
      background-position: center;
      width: 200px;
      height: 60px;
      border: none;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      margin: 20px auto;
      border-radius: 30px;
      color: white;
      font-size: 1.2em;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      display: block;
      will-change: transform;
      backface-visibility: hidden;
    }

    .start-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }

    .start-button:focus {
      outline: 3px solid #667eea;
      outline-offset: 2px;
    }

    .level-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .level-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      will-change: transform;
      backface-visibility: hidden;
    }

    .level-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      border-color: #667eea;
    }

    .level-card:focus {
      outline: 3px solid #667eea;
      outline-offset: 2px;
      border-color: #667eea;
    }

    .level-emoji {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .level-title {
      font-size: 1.1em;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 8px;
    }

    .level-emotions {
      font-size: 0.9em;
      color: #7f8c8d;
      line-height: 1.4;
    }

    .back-button {
      background: rgba(149, 165, 166, 0.9);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      margin: 10px;
      transition: all 0.3s ease;
      font-size: 1em;
    }

    .back-button:hover {
      background: rgba(127, 140, 141, 0.9);
      transform: translateY(-2px);
    }

    .back-button:focus {
      outline: 3px solid #667eea;
      outline-offset: 2px;
    }

    .content-text {
      color: #34495e;
      font-size: 1.1em;
      line-height: 1.6;
      text-align: left;
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      max-height: 60vh;
      overflow-y: auto;
    }

    .action-text {
      color: #34495e;
      font-size: 1.0em;
      line-height: 1.5;
      text-align: left;
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      max-height: 60vh;
      overflow-y: auto;
      white-space: pre-line;
    }

    .progress-indicator {
      margin: 10px 0;
      font-size: 0.9em;
      color: #7f8c8d;
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 15px;
      border-radius: 20px;
      display: inline-block;
    }

    .level-highlight {
      margin: 15px 0;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }

    .error-message {
      background: rgba(231, 76, 60, 0.1);
      color: #e74c3c;
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
      border-left: 4px solid #e74c3c;
      display: none;
    }

    .loading {
      opacity: 0.7;
      pointer-events: none;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .pulsing {
      animation: pulse 1.5s infinite;
    }

    /* Responsive –∞–Ω–∏–º–∞—Ü–∏–∏ - –æ—Ç–∫–ª—é—á–∞–µ–º –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (prefers-reduced-motion: reduce) {
      .game-container,
      .level-card,
      .start-button,
      .back-button {
        animation: none !important;
        transition: none !important;
      }
      
      .overlay {
        transition: none !important;
      }
    }

    @media (max-width: 768px) {
      .game-container {
        padding: 20px;
        margin: 10px;
        max-width: 600px;
      }

      .logo {
        width: 160px;
        height: 160px;
      }

      .level-grid {
        grid-template-columns: 1fr;
      }

      .content-text, .action-text {
        font-size: 0.95em;
        padding: 15px;
      }
    }

    /* –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
    .content-text, .action-text {
      contain: layout style paint;
    }

    .level-card {
      contain: layout style paint;
    }
  </style>
</head>
  
<body>
  <audio id="backgroundMusic" loop>
    <source src="music.mp3" type="audio/mpeg" />
  </audio>

  <div id="introScreen" class="overlay">
    <div class="game-container">
      <div class="logo"></div>
      <button class="start-button" onclick="startGame()" 
              aria-label="Start your emotional journey"
              tabindex="0">Start Your Journey</button>
    </div>
  </div>

  <!-- Level Selection Screen -->
  <div id="levelSelection" class="overlay" style="display: none;">
    <div class="game-container">
      <h2 style="color: #2c3e50; margin-bottom: 20px;">How are you feeling right now?</h2>
      <div class="progress-indicator" id="progressIndicator" style="display: none;">
        Explored levels: 0/9
      </div>
      <p style="color: #7f8c8d; margin-bottom: 25px;">Choose the level that best describes your current emotional state:</p>
      <div class="error-message" id="errorMessage">
        Something went wrong. Please try again.
      </div>
      <div class="level-grid">
        <div class="level-card level-1" onclick="selectLevel(1)" 
             tabindex="0" role="button" 
             aria-label="Select Level 1: Deep Negativity"
             onkeypress="handleKeyPress(event, 1)">
          <div class="level-emoji">üî¥</div>
          <div class="level-title">Level 1: Deep Negativity</div>
          <div class="level-emotions">Humiliated, Desperate, Depressed, Powerless</div>
        </div>
        <div class="level-card level-2" onclick="selectLevel(2)" 
             tabindex="0" role="button" 
             aria-label="Select Level 2: Heavy Experiences"
             onkeypress="handleKeyPress(event, 2)">
          <div class="level-emoji">üü†</div>
          <div class="level-title">Level 2: Heavy Experiences</div>
          <div class="level-emotions">Disappointed, Empty, Numb, Hopeless</div>
        </div>
        <div class="level-card level-3" onclick="selectLevel(3)" 
             tabindex="0" role="button" 
             aria-label="Select Level 3: Negative Activation"
             onkeypress="handleKeyPress(event, 3)">
          <div class="level-emoji">üî¥</div>
          <div class="level-title">Level 3: Negative Activation</div>
          <div class="level-emotions">Angry, Irritated, Upset, Critical</div>
        </div>
        <div class="level-card level-4" onclick="selectLevel(4)" 
             tabindex="0" role="button" 
             aria-label="Select Level 4: Neutral Negativity"
             onkeypress="handleKeyPress(event, 4)">
          <div class="level-emoji">üü§</div>
          <div class="level-title">Level 4: Neutral Negativity</div>
          <div class="level-emotions">Bored, Embarrassed, Uncertain, Doubtful</div>
        </div>
        <div class="level-card level-5" onclick="selectLevel(5)" 
             tabindex="0" role="button" 
             aria-label="Select Level 5: Neutral State"
             onkeypress="handleKeyPress(event, 5)">
          <div class="level-emoji">‚ö™</div>
          <div class="level-title">Level 5: Neutral State</div>
          <div class="level-emotions">Calm, Content, Relaxed, Focused</div>
        </div>
        <div class="level-card level-6" onclick="selectLevel(6)" 
             tabindex="0" role="button" 
             aria-label="Select Level 6: Light Positivity"
             onkeypress="handleKeyPress(event, 6)">
          <div class="level-emoji">üü°</div>
          <div class="level-title">Level 6: Light Positivity</div>
          <div class="level-emotions">Interested, Curious, Hopeful, Accepting</div>
        </div>
        <div class="level-card level-7" onclick="selectLevel(7)" 
             tabindex="0" role="button" 
             aria-label="Select Level 7: Active Positivity"
             onkeypress="handleKeyPress(event, 7)">
          <div class="level-emoji">üü¢</div>
          <div class="level-title">Level 7: Active Positivity</div>
          <div class="level-emotions">Energetic, Motivated, Inspired, Confident</div>
        </div>
        <div class="level-card level-8" onclick="selectLevel(8)" 
             tabindex="0" role="button" 
             aria-label="Select Level 8: High Positivity"
             onkeypress="handleKeyPress(event, 8)">
          <div class="level-emoji">üü°</div>
          <div class="level-title">Level 8: High Positivity</div>
          <div class="level-emotions">Joyful, Grateful, Enthusiastic, Playful</div>
        </div>
        <div class="level-card level-9" onclick="selectLevel(9)" 
             tabindex="0" role="button" 
             aria-label="Select Level 9: Peak States"
             onkeypress="handleKeyPress(event, 9)">
          <div class="level-emoji">üíö</div>
          <div class="level-title">Level 9: Peak States</div>
          <div class="level-emotions">Blissful, Enlightened, Ecstatic, Unconditionally Loving</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Guidance Screen -->
  <div id="guidanceScreen" class="overlay" style="display: none;">
    <div class="game-container">
      <h2 style="color: #2c3e50; margin-bottom: 20px;">Guidance & Techniques</h2>
      <div class="progress-indicator" id="guidanceProgress" style="display: none;">
        Explored levels: 0/9
      </div>
      <div id="guidanceText" class="content-text">
        Here you will see your level-specific strategies.
      </div>
      <button class="back-button" onclick="goBack()" aria-label="Go back to level selection">‚Üê Back to Levels</button>
    </div>
  </div>

  <!-- Action Screen -->
  <div id="actionScreen" class="overlay" style="display: none;">
    <div class="game-container">
      <h2 style="color: #2c3e50; margin-bottom: 20px;">Your Action Plan</h2>
      <div class="progress-indicator" id="actionProgress" style="display: none;">
        Explored levels: 0/9
      </div>
      <div id="actionText" class="action-text">
        This is where your practical steps will appear.
      </div>
      <button class="back-button" onclick="goToGuidance()" aria-label="Go back to guidance">‚Üê Back to Guidance</button>
      <button class="start-button" onclick="endGame()" aria-label="Finish session">Finish</button>
    </div>
  </div>

  <script>
    // –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    const gameState = {
      currentLevel: null,
      visitedLevels: new Set(),
      startTime: null,
      sessionData: [],
      isInitialized: false
    };

    // –î–µ–±–∞—É–Ω—Å–∏–Ω–≥ –¥–ª—è –∫–ª–∏–∫–æ–≤
    let isTransitioning = false;

    function debounceClick(callback, delay = 300) {
      if (isTransitioning) return;
      isTransitioning = true;
      callback();
      setTimeout(() => isTransitioning = false, delay);
    }

    // –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
    function safeElementOperation(elementId, operation) {
      try {
        const element = document.getElementById(elementId) || document.querySelector(elementId);
        if (!element) {
          console.warn(`Element not found: ${elementId}`);
          showError('Interface element not found. Please refresh the page.');
          return false;
        }
        operation(element);
        return true;
      } catch (error) {
        console.error(`Error with element ${elementId}:`, error);
        showError('An error occurred. Please try again.');
        return false;
      }
    }

    function showError(message) {
      const errorElement = document.getElementById('errorMessage');
      if (errorElement) {
        errorElement.textContent = message;
        errorElement.style.display = 'block';
        setTimeout(() => {
          errorElement.style.display = 'none';
        }, 5000);
      }
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è
    function validateLevel(level) {
      return level >= 1 && level <= 9 && Number.isInteger(level) && !isNaN(level);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    function updateProgressIndicator() {
      const totalLevels = 9;
      const visitedCount = gameState.visitedLevels.size;
      const progressText = `Explored levels: ${visitedCount}/${totalLevels}`;
      
      ['progressIndicator', 'guidanceProgress', 'actionProgress'].forEach(id => {
        safeElementOperation(id, el => {
          el.textContent = progressText;
          el.style.display = visitedCount > 0 ? 'inline-block' : 'none';
        });
      });
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
    function formatActionText(text) {
      if (!text) return '';
      
      return text
        .replace(/(\d+\.\s)/g, '<strong>$1</strong>')
        .replace(/(Goal:|Action Plan:|‚ö†Ô∏è[^:]*:|‚úÖ[^:]*:|üî•[^:]*:|üß≠[^:]*:)/g, '<strong>$1</strong>')
        .replace(/^(üî¥|üü†|üü°|üü¢|üíö|‚ö™|üü§)(.+)$/gm, '<div class="level-highlight"><strong>$1$2</strong></div>');
    }

    // –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
    function transitionToScreen(fromId, toId, callback) {
      const fromEl = document.getElementById(fromId);
      const toEl = document.getElementById(toId);
      
      if (!fromEl || !toEl) {
        console.error('Screen transition failed: elements not found');
        return;
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
      fromEl.classList.add('loading');
      
      setTimeout(() => {
        fromEl.style.display = 'none';
        fromEl.classList.remove('loading');
        toEl.style.display = 'flex';
        
        if (callback) callback();
        
        // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
        const firstButton = toEl.querySelector('button, .level-card');
        if (firstButton) {
          firstButton.focus();
        }
      }, 150);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
    function initializeGame() {
      if (gameState.isInitialized) return;
      
      gameState.isInitialized = true;
      gameState.startTime = Date.now();
      
      // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ
      const backgroundMusic = document.getElementById("backgroundMusic");
      if (backgroundMusic) {
        backgroundMusic.volume = 0.3; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–º–µ—Ä–µ–Ω–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
        backgroundMusic.load();
      }
      
      console.log('Game initialized successfully');
    }

    // –ì–ª–∞–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
    function startGame() {
      debounceClick(() => {
        initializeGame();
        
        const backgroundMusic = document.getElementById("backgroundMusic");
        if (backgroundMusic) {
          backgroundMusic.play().catch(e => console.log('Audio play failed:', e));
        }
        
        transitionToScreen('introScreen', 'levelSelection');
      });
    }

    function selectLevel(level) {
      if (!validateLevel(level)) {
        console.error('Invalid level:', level);
        showError('Invalid level selected. Please try again.');
        return;
      }
      
      debounceClick(() => {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        gameState.currentLevel = level;
        gameState.visitedLevels.add(level);
        
        updateProgressIndicator();
        
        transitionToScreen('levelSelection', 'guidanceScreen', () => {
          const guidanceText = guidanceTexts[level];
          if (guidanceText) {
            safeElementOperation('guidanceText', el => {
              el.innerHTML = `
                ${guidanceText}
                <br/><br/>
                <button class="start-button" onclick="goToActionPlan(${level})" aria-label="Show action plan for level ${level}">‚Üí Show Action Plan</button>
              `;
            });
          }
        });
      });
    }

    function goToActionPlan(level) {
      if (!validateLevel(level)) {
        console.error('Invalid level for action plan:', level);
        return;
      }
      
      debounceClick(() => {
        transitionToScreen('guidanceScreen', 'actionScreen', () => {
          const rawText = actionPlans[level] || "Your custom action steps go here.";
          const formattedText = formatActionText(rawText);
          
          safeElementOperation('actionText', el => {
            el.innerHTML = formattedText;
            el.scrollTop = 0;
          });
        });
      });
    }

    function goToGuidance() {
      debounceClick(() => {
        transitionToScreen('actionScreen', 'guidanceScreen');
      });
    }

    function goBack() {
      debounceClick(() => {
        transitionToScreen('guidanceScreen', 'levelSelection');
      });
    }

    function endGame() {
      debounceClick(() => {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Å—Å–∏–∏
        gameState.sessionData.push({
          endTime: Date.now(),
          duration: Date.now() - gameState.startTime,
          levelsExplored: Array.from(gameState.visitedLevels),
          lastLevel: gameState.currentLevel
        });
        
        // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
        gameState.currentLevel = null;
        gameState.visitedLevels.clear();
        gameState.startTime = null;
        
        transitionToScreen('actionScreen', 'introScreen', () => {
          updateProgressIndicator();
        });
      });
    }

    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    function handleKeyPress(event, level) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        selectLevel(level);
      }
    }

    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        const currentScreen = document.querySelector('.overlay[style*="flex"]');
        if (currentScreen && currentScreen.id !== 'introScreen') {
          if (currentScreen.id === 'actionScreen') {
            goToGuidance();
          } else if (currentScreen.id === 'guidanceScreen') {
            goBack();
          }
        }
      }
    });

    // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    document.addEventListener('DOMContentLoaded', function() {
      // –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
      const images = ['background.png', 'container-background.png', 'logo.png', 'startbutton.png'];
      images.forEach(src => {
        const img = new Image();
        img.src = src;
      });
      
      // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      window.formatRegexes = {
        numbers: /(\d+\.\s)/g,
        headers: /(Goal:|Action Plan:|‚ö†Ô∏è[^:]*:|‚úÖ[^:]*:|üî•[^:]*:|üß≠[^:]*:)/g,
        levels: /^(üî¥|üü†|üü°|üü¢|üíö|‚ö™|üü§)(.+)$/gm
      };
    });

    // –î–∞–Ω–Ω—ã–µ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π
    const guidanceTexts = {
      1: "Level 1: Deep Negativity - Focus on basic self-care and reaching out for support. Small steps like deep breathing, gentle movement, or connecting with a trusted friend can help.",
      2: "Level 2: Heavy Experiences - Allow yourself to feel these emotions without judgment. Consider journaling, meditation, or engaging in activities that bring small moments of comfort.",
      3: "Level 3: Negative Activation - Channel this energy constructively through physical exercise, creative expression, or problem-solving. Take breaks to cool down when needed.",
      4: "Level 4: Neutral Negativity - Explore new activities or perspectives. Sometimes a change of environment or engaging with different content can shift your state.",
      5: "Level 5: Neutral State - This is a great foundation! Consider setting intentions, practicing gratitude, or engaging in activities that align with your values.",
      6: "Level 6: Light Positivity - Build on this momentum with learning something new, connecting with others, or pursuing interests that inspire you.",
      7: "Level 7: Active Positivity - Great energy for taking action on goals, helping others, or engaging in challenging but rewarding activities.",
      8: "Level 8: High Positivity - Share this joy with others, celebrate achievements, and consider how you can maintain this positive state.",
      9: "Level 9: Peak States - Embrace this beautiful state while staying grounded. Consider how you can integrate these feelings of connection and love into daily life."
    };

    const actionPlans = {
      1: `üî¥ Level 1: Rock Bottom ‚Äì Despair / Apathy / Collapse
üí¨ Typical Emotional State:
You feel utterly depleted ‚Äî like nothing matters. There may be a sense of void, emotional numbness, or internal collapse.
This is the lowest emotional frequency, often marked by deep despair, isolation, or complete lack of motivation.

üß† Associated Emotions:
Apathy

Deep Grief

Numbness

Total Fatigue

Hopelessness

Collapse

Suicidal Thoughts (in extreme cases)

Emotional Freeze

Emptiness

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Complete disconnection from reality or the body

Belief that nothing can help or change

Isolation becomes seductive ‚Äî "No one gets it, so why try"

Self-abandonment or emotional shutdown

Suicidal ideation or existential dread if left unchecked

Note: This level can be clinical. If someone is stuck here for days or weeks, professional support may be required.

ü™ú Strategies to Begin Moving Up:
The goal here is not motivation, but activation ‚Äî to wake up the system gently.

Gentle physical stimulation

Take a cold or warm shower. Move fingers or stretch slowly. Even 1 push-up counts.

Basic sensory grounding

Light a scented candle, listen to calming music, touch something soft. Come back into the body.

Micro-commitment

Promise to do one tiny thing today: drink a glass of water, open a window, brush your teeth.

Compassionate voice

Say: ‚ÄúIt‚Äôs okay to feel this. I‚Äôm still here.‚Äù
Use a journal or voice note ‚Äî even 10 seconds helps.

Connect ‚Äî even passively

Listen to a podcast, message someone ‚ÄúI‚Äôm here,‚Äù or ask for a hug. Even if it feels fake ‚Äî do it.

üß® Risk Snapshot:
Getting stuck in an emotional freeze

Letting shame block any attempts at change (‚ÄúI should be stronger‚Äù)

Using substances or distractions to escape (binge-watching, alcohol, doom-scrolling)

üõ†Ô∏è Supportive Practices:
Nap + hydrate (this helps regulate cortisol + adrenaline)

Pet an animal or hug a pillow (oxytocin release)

Crying (if it comes) ‚Äî is a healthy nervous system release

Speak to one safe person ‚Äî even if only to say ‚ÄúI‚Äôm not okay‚Äù

üß≠ Reframe for Growth:
This is not your forever state.
You are not broken ‚Äî you're overloaded, under-supported, or simply burned out.
Your system shut down to protect itself. Now we gently reboot.`,

      2: `üî¥ Level 2: Heavy Experiences ‚Äì Emotional Fatigue, Numbness, and Despair Under the Surface
üí¨ Typical Emotional State:
You're functional but disconnected. You might be going through the motions, but inside ‚Äî you feel disappointed, emotionally flat, or hopeless. This is the ‚Äúlow-battery mode‚Äù of life: not rock bottom, but not alive either.

üß† Associated Emotions:
Disappointed

Emotionally Exhausted

Empty

Numb

Hopeless

Withdrawn

Resigned

Bored but unable to act

Quiet sadness that doesn‚Äôt speak

‚ö†Ô∏è Common Pitfalls / Traps:
Going on autopilot, pretending everything‚Äôs fine

Emotional suppression (‚ÄúI shouldn‚Äôt feel this way‚Äù)

Losing touch with desire ‚Äî you forget what excites you

Engaging in silent sabotage (procrastination, isolation, checking out)

Comparison to others who seem ‚Äúahead‚Äù or ‚Äúmore alive‚Äù

ü™ú Strategies to Move Up:
Name it to claim it

Identify your exact feeling. Use the Emotion Wheel if needed.

Say it out loud or write: ‚ÄúI feel ___ right now.‚Äù

Nourishing movement

Gentle yoga, a slow walk, 5 minutes of dancing. The goal is not ‚Äúexercise,‚Äù but reconnecting with your body.

Tiny pleasures

Drink your favorite tea. Sit in the sun. Put on music that feels like home.
‚Üí These spark micro-emotions, essential for recovery.

Talk to someone without solutions

Just be heard. Say: ‚ÄúI don‚Äôt need advice, I just need to vent.‚Äù

Rediscover small purpose

Make something. Write. Cook. Organize a drawer. Anything that reaffirms agency.

üß® Risks at This Level:
Acting numb when you're actually overwhelmed

Pushing through without addressing inner depletion

Suppressing so long that emotions build up into anxiety or anger

Mistaking apathy for laziness (‚ÄúWhy can‚Äôt I just be productive?‚Äù)

üß† Conscious Decision-Making:
Don‚Äôt make big decisions from this level ‚Äî they‚Äôre often rooted in avoidance or escape.

Instead, ask:

What do I need to feel 10% better?

What is one boundary I need to re-establish?

üß≠ Reframe for Growth:
This level often appears right before breakthroughs.
The heaviness is a message: your system is saying ‚ÄúI can‚Äôt live like this anymore.‚Äù

That‚Äôs not a weakness. That‚Äôs inner intelligence.`,

      3: `üü† Level 3: Negative Activation
Typical Emotional State:
Tense, restless, irritated, impulsive, scattered, hyper-activated but not focused.
You feel like you‚Äôre doing something ‚Äî but not necessarily the right things.

Associated Emotions (from emotion wheels):

Frustration

Anxiety

Stress

Impatience

Overwhelm

Confusion

Agitation

Urgency

Hyper-productivity (driven by fear, not clarity)

üîç Key Traits of This Level:
You‚Äôre active ‚Äî but it‚Äôs often reactive, not conscious or strategic.

Often triggered by a fear of falling behind, missing out, or being judged.

You might appear productive on the outside, but inside there‚Äôs chaotic urgency.

‚ö†Ô∏è Common Pitfalls / Traps:
Overreacting ‚Äî sending messages, quitting, or deciding things impulsively.

Overcommitting ‚Äî saying yes to everything because of pressure or fear of missing out.

Avoiding root causes ‚Äî staying ‚Äúbusy‚Äù to avoid uncomfortable introspection.

Misinterpreting stress as motivation ‚Äî mistaking tension for momentum.

Making rushed decisions ‚Äî buying things, launching too soon, miscommunicating.

‚ö° Example: You feel anxious about your future, so you sign up for five courses‚Ä¶ but don‚Äôt finish any of them.

‚úÖ Strategies to Move Up to Constructive Energy / Clarity:
Pause before reacting.

Ask: ‚ÄúAm I responding to reality, or to fear?‚Äù

Rechannel the energy.

Go for a short run, do breathwork, shake out the tension, or dance ‚Äî burn the static charge.

Practice the 3-Minute Mind Dump.

Write every thought, to-do, and worry on paper. No filter. Just empty your mind.

Name the emotion honestly.

"I'm not just busy, I‚Äôm overwhelmed and scared I‚Äôll fail." Naming is taming.

Reconnect with your values.

Ask: "Is what I‚Äôm doing aligned with what actually matters to me?"

Focus on a single priority.

Pick one small task. Complete it slowly, mindfully. Feel the shift.

‚ö° Power-Up Move:
Do 30 seconds of ‚ÄúBox Breathing‚Äù:
Inhale 4s ‚Üí Hold 4s ‚Üí Exhale 4s ‚Üí Hold 4s. Repeat 4 times.
This activates the parasympathetic nervous system, reducing impulsivity and improving clarity.

üö® What to Watch Out For (Even When Improving):
False clarity: After releasing tension, don't rush to make decisions immediately ‚Äî give yourself a ‚Äúcooldown.‚Äù

Overconfidence: As energy rises, be cautious of manic optimism (e.g., sudden risky investments).

External validation loop: Don‚Äôt let momentum be hijacked by social media likes or praise ‚Äî stay internally focused.

üß≠ Reframing This Stage:
This is not a bad stage ‚Äî it‚Äôs just unrefined power.
Think of it like steam building up in a pressure cooker. You can either explode or redirect the energy into useful motion.`,

        4: `üü° Level 4: Stabilization & Neutral
Typical Emotional State:
Balanced, calm, indifferent, grounded, ‚Äúokay.‚Äù
You‚Äôre no longer reactive ‚Äî but not yet inspired or energized either.
A crucial pivot point in the emotional ladder.

üå§Ô∏è Associated Emotions:
Neutral

Stable

Content

Accepting

Mild interest

Calm

Open

Reflective

Centered

Disconnected (but not negatively)

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Staying too long in ‚Äúneutral gear‚Äù ‚Äî comfortable but stagnant.

Mistaking stability for progress ‚Äî no real movement forward.

Emotional numbness ‚Äî confusing peace with disconnection.

Avoiding ambition ‚Äî rejecting desire to avoid risk.

Procrastination disguised as presence ‚Äî ‚ÄúI‚Äôm just going with the flow‚Äù without direction.

üß† Example: You feel better than before, but can't seem to push forward. You keep organizing, preparing, thinking ‚Äî but not doing anything meaningful.

‚úÖ Strategies to Move Up into Engagement & Positive Momentum:
Reconnect with curiosity.

Ask: ‚ÄúWhat could be interesting right now?‚Äù or ‚ÄúWhat would feel satisfying to create or explore?‚Äù

Do a 5-minute ‚Äúmomentum builder‚Äù task.

Small win that gives a sense of progress: clean a drawer, send one email, sketch one idea.

Visualize best-case future.

Use the ‚Äú3 Months From Now‚Äù prompt:
‚ÄúIf I felt proud and aligned 3 months from now‚Ä¶ what would I be doing today?‚Äù

Choose one low-stakes creative action.

Draw. Write freely. Reorganize your space. Make a playlist. Create without pressure.

Ground your body.

Light stretching, walking barefoot, tai chi, breath-led yoga ‚Äî builds presence and energy.

Ask yourself:

‚ÄúWhat‚Äôs one area in life I‚Äôve been putting off improving, but now feel ready to look at with honesty?‚Äù

‚ö° Power-Up Move:
Do the ‚ÄúEnergy Check-In‚Äù:

Body: How do I feel physically?

Mind: What‚Äôs the loudest thought?

Emotion: What‚Äôs the background emotion?

Soul: What do I quietly desire?

This creates internal coherence and readiness for flow.

üö® What to Watch Out For (Even at This Good Stage):
Safe zone syndrome: You‚Äôve exited chaos, but resist challenge.

‚ÄúEverything‚Äôs fine‚Äù mode: Progress slows because urgency is gone.

Over-reflection without action.

Disconnection from deeper desire ‚Äî you may settle for comfort, not vitality.

üß≠ Reframe for Growth:
This level is a launchpad, not a resting place.
Stability gives you the platform to build.
From here, you can consciously direct energy into purpose, joy, and deeper flow ‚Äî but you must choose to act.`,

        5: `üü° Level 5: Willingness / Hope / Mild Positivity
Typical Emotional State:
You‚Äôre open. Curious. Ready to engage.
Not quite inspired, but no longer stuck ‚Äî this is the beginning of upward momentum.

üåü Associated Emotions:
Hopeful

Optimistic

Interested

Willing

Curious

Open-minded

Encouraged

Eager (mildly)

Motivated (starting to emerge)

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Overestimating readiness ‚Äî taking on too much too fast can overwhelm this delicate stage.

Lack of clear direction ‚Äî momentum without aim leads to scattered effort.

Relying too much on external validation ‚Äî still not fully rooted in intrinsic drive.

Avoiding deeper internal work ‚Äî trying to "stay positive" without resolving lingering issues.

üß† Example: You start a project with enthusiasm but abandon it after two days. Energy is rising ‚Äî but lacks structure or grounding.

‚úÖ Strategies to Move Up into True Positivity & Flow:
Set small, clear intentions.

Not massive goals ‚Äî just a next step with meaning (e.g. ‚ÄúReach out to one person I admire‚Äù).

Track micro-wins.

Each small success builds confidence and reinforces upward movement. Try journaling ‚Äú3 wins a day.‚Äù

Practice emotional momentum.

Notice and extend moments when you feel uplifted (amplify instead of dismissing them).

Connect with purpose, not pressure.

Ask: ‚ÄúWhy does this matter to me personally?‚Äù Focus on contribution and meaning.

Use movement to shift energy.

Dance, walk with intention, tidy your space with music ‚Äî use your body to support forward emotion.

Surround yourself with inspiration.

Podcasts, people, quotes ‚Äî everything around you should reinforce upward direction.

‚ö° Power-Up Move:
Do a ‚ÄúCourage Ritual‚Äù ‚Äî
Commit to one thing today that‚Äôs slightly uncomfortable but aligned with growth (send a pitch, ask a question, apply to something).
This builds emotional muscle and trust in yourself.

üö® What to Watch Out For:
‚ÄúToxic optimism‚Äù ‚Äî skipping over real fears or doubts in favor of forced positivity.

Shiny-object syndrome ‚Äî jumping from one idea to another without finishing.

Premature self-comparison ‚Äî seeing others further ahead and spiraling downward again.

Fear of momentum ‚Äî low-key sabotage due to fear of success.

üß≠ Reframe for Growth:
Willingness is the bridge between neutrality and creativity.
It‚Äôs where real personal transformation begins ‚Äî not in massive breakthroughs, but in small consistent actions.
This is where the Flow state starts to become possible ‚Äî as your energy and trust return.`,

        6: `üü° Level 6: Contentment / Calm Joy / Satisfaction
üåø Typical Emotional State:
You feel good ‚Äî not ecstatic, but grounded and genuinely okay.
There‚Äôs a sense of peace, lightness, and presence. You‚Äôre not rushing, not grasping ‚Äî and that's powerful.

üåü Associated Emotions (from Wheel references):
Calm

Relaxed

Satisfied

Grateful

Light-hearted

Present

Balanced

Comfortable

Steady

Appreciative

‚úÖ Strategies to Move Up into Enthusiasm, Passion & Flow:
Tune into gratitude.

Identify 3 small things that bring you peace right now (e.g., sunlight, coffee aroma, a finished task).

Create from stillness.

This is a great place to write, plan, or make art ‚Äî without pressure.

Simplify.

Let go of tasks or ideas that clutter your mind. Focus on what matters most today.

Go deeper with presence.

Practice mindfulness. Slow meals, mindful walks, gentle meditation. These amplify contentment.

Share light energy.

A simple compliment, a smile, or helping hand deepens your own experience of well-being.

Do small acts of alignment.

Tidy a corner, stretch your back, drink water. Harmony in small actions reinforces this stable energy.

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Complacency.

Staying in contentment too long can cause stagnation or missed growth opportunities.

Fear of shaking peace.

Avoiding challenges because they may disturb your balance (which can block progress).

Underestimating your potential.

Settling for ‚Äúokay‚Äù when you‚Äôre ready for ‚Äúamazing.‚Äù

üß† Example: You feel good and don't want to ruin it ‚Äî so you put off sending that important application. But staying here too long can mean missing the window of momentum.

üî• Power-Up Move:
Ask: ‚ÄúWhat would my calmest, wisest self gently stretch into right now?‚Äù
Then do that. Keep it light, but directed.

üö® What to Watch Out For:
Pleasure over purpose.

Staying in comfort zones at the expense of growth.

Drift mode.

Floating through days without checking alignment.

Fading emotional edge.

Losing passion if contentment turns into disengagement.

üß≠ Reframe for Growth:
Contentment is a powerful launchpad.
From here, you can build sustainable momentum toward creative energy, passion, and purpose ‚Äî without burning out.
Enjoy it ‚Äî but don‚Äôt settle if your soul is calling for more.`,

        7: `üü° Level 7: Optimism / Curiosity / Interest
üåü Typical Emotional State:
This level is your turning point. You begin to look toward the future with hope.
Your mind starts generating ideas, asking questions, wanting to move toward something.

üí¨ Associated Emotions (from Wheel & Ladder references):
Curious

Interested

Hopeful

Optimistic

Open-minded

Playful

Engaged

Alert

Energetic

Lightly Motivated

‚úÖ Strategies to Move Up into Enthusiasm & Inspired Action:
Follow the spark.

Ask: ‚ÄúWhat feels interesting right now?‚Äù Then give it 15‚Äì30 minutes of focused attention.

Set a micro-goal.

Not a big outcome. Just the next meaningful step ‚Äî clarity fuels momentum.

Brainstorm freely.

Capture ideas without judging. Let imagination run before refining.

Change environments.

Move to a caf√©, library, park, or new workspace. New surroundings = fresh curiosity.

Ask better questions.

Shift from ‚ÄúWhy can‚Äôt I?‚Äù to ‚ÄúWhat‚Äôs possible from here?‚Äù

Connect with other curious minds.

Share an idea with someone who energizes you ‚Äî community multiplies interest.

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Scattered attention.

Curiosity can fragment into distractions. Stay focused on aligned exploration.

Chronic ideation.

Constant thinking without action = idea fatigue.

Strategy: Balance 1 idea with 1 concrete step.

Overplanning.

Trying to mentally map everything before beginning can kill the spark.

False starts.

Jumping from one thing to the next without finishing anything leads to overwhelm.

üî• Power-Up Move:
Start a ‚ÄúMomentum Journal.‚Äù
Each day, note:

What sparked curiosity?

What 1 thing did you try or explore?

What‚Äôs worth continuing?

üö® What to Watch For:
Seeking novelty for escape.

Curiosity used to avoid discomfort, not to grow.

Fear of failing early.

At this stage, experimentation > perfection ‚Äî don‚Äôt hold back.

üß≠ Reframe for Growth:
This level is about opening doors.
You don‚Äôt need to know everything ‚Äî you just need to trust that exploring will reveal the path.

Curiosity is a bridge to higher energy and flow.
Use it well ‚Äî and you‚Äôll soon be in states of joy, creativity, and even personal breakthroughs.`,

        8: `üü° Level 8: Enthusiasm / Motivation / Purpose
üåü Typical Emotional State:
Now you‚Äôre fully engaged. You‚Äôve moved from thinking to doing ‚Äî and you feel aligned with your actions.
There‚Äôs a sense of inner drive, direction, and upliftment.

üí¨ Associated Emotions:
Enthusiastic

Motivated

Purposeful

Eager

Excited

Empowered

Inspired

Focused

Confident

Joyfully Determined

‚úÖ Strategies to Move Up Toward Passion / Joy:
Channel energy into aligned action.

Use this energy to build momentum on what truly matters. Prioritize meaningful projects.

Reconnect with purpose.

Ask: Why is this important to me? Who am I doing this for?

Create momentum rituals.

Start the day with a short win or micro habit to reinforce motivation.

Celebrate progress.

Acknowledge small achievements ‚Äî it locks in positive reinforcement and keeps energy flowing.

Work in deep-focus blocks.

90 minutes of uninterrupted, immersive work helps you drop into flow faster.

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Overexcitement ‚Üí burnout.

Riding high can tempt you to overcommit. Remember: energy is renewable, not infinite.

Losing touch with rest.

Enthusiasm can mask exhaustion. Schedule recovery just like action.

Tunnel vision.

Too much focus can block helpful feedback or new opportunities. Stay open while staying driven.

Chasing passion for its own sake.

If you pursue ‚Äúhype‚Äù rather than alignment, you risk crashing when things get hard.

üî• Power-Up Move:
The ‚ÄúWhy 5x‚Äù Drill
Take a task and ask ‚ÄúWhy is this important to me?‚Äù
Then repeat your answer 5 times, each time going deeper.
You‚Äôll uncover intrinsic motivation ‚Äî the fuel that lasts.

üö® What to Watch For:
Acting impulsively just because energy is high

Making big decisions (e.g., quitting job, starting business, ending relationship) without grounding

Ignoring emotional signs of fatigue because ‚ÄúI‚Äôm on a roll‚Äù

üß≠ Reframe for Growth:
This level is where meaning meets energy.
It‚Äôs not just about doing more ‚Äî it‚Äôs about doing what moves you and feeling that fire as fuel.
If you learn to harness it wisely, enthusiasm becomes a gateway to Flow and Peak States.`,

        9: `üü° Level 9: Passion / Flow / Excitement
üåü Typical Emotional State:
This is where you're in the zone. Time dilates. Energy feels limitless.
You‚Äôre deeply aligned ‚Äî emotionally, mentally, even physically ‚Äî and it shows in your performance, joy, and clarity.

üí¨ Associated Emotions:
Passionate

Flowing

Electrified

Empowered

Absorbed

Alive

Vibrant

Ecstatic

Creative

Limitless

‚úÖ Strategies to Sustain or Deepen the State:
Minimize distractions.

Protect your flow space. Turn off notifications. Set boundaries.

Ride the wave, but don‚Äôt over-surf.

Work in cycles. Use Pomodoro-style sprints and scheduled breaks to avoid burnout.

Balance emotion with structure.

Flow thrives on freedom within form. Define goals, then surrender to the process.

Reflect and integrate.

After a peak session, pause. What worked? What triggered flow? Capture it.

Keep the nervous system stable.

High excitement can crash into fatigue. Nourish your body: hydrate, breathe, stretch.

‚ö†Ô∏è Common Pitfalls / Hidden Traps:
Flow addiction.

Chasing only peak states can lead to avoidance of necessary low-energy tasks.

Overconfidence.

Excitement can cause poor decisions ‚Äî risky investments, impulsive promises, or skipping due diligence.

Ignoring your needs.

Flow can make you forget hunger, fatigue, or emotional undercurrents. Check in with your body.

Romanticizing chaos.

Passion without grounding can feel powerful, but becomes unstable over time.

üß® Risk Snapshot:
You might trust too easily ‚Üí scams / manipulation

You might scale too fast without foundation

You might neglect relationships or self-care chasing creative highs

üõ†Ô∏è Grounding Practices:
Do a 5-minute body scan

Journal after each high-flow moment to reflect, not just rush forward

Walk in nature to discharge excessive energy

Anchor your excitement in values and long-term vision

üß≠ Reframe for Growth:
Flow is not a goal ‚Äî it‚Äôs a side effect of clarity, alignment, and surrender.
Use it as a signal that you're on the right path, not as a drug to escape low states.
You‚Äôre not chasing the feeling ‚Äî you‚Äôre becoming the person who lives in that frequency more often.`
    };

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é
    let currentVolume = 0.3;
    
    function createVolumeControl() {
      const volumeControl = document.createElement('div');
      volumeControl.id = 'volumeControl';
      volumeControl.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 25px;
        padding: 10px 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 1000;
        transition: all 0.3s ease;
      `;
      
      volumeControl.innerHTML = `
        <span style="font-size: 1.2em;">üîä</span>
        <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="${currentVolume}" 
               style="width: 80px; cursor: pointer;">
        <span id="volumeValue" style="font-size: 0.8em; color: #666; min-width: 30px;">${Math.round(currentVolume * 100)}%</span>
      `;
      
      document.body.appendChild(volumeControl);
      
      const slider = document.getElementById('volumeSlider');
      const valueDisplay = document.getElementById('volumeValue');
      const backgroundMusic = document.getElementById('backgroundMusic');
      
      slider.addEventListener('input', function() {
        currentVolume = parseFloat(this.value);
        if (backgroundMusic) {
          backgroundMusic.volume = currentVolume;
        }
        valueDisplay.textContent = Math.round(currentVolume * 100) + '%';
        
        // –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≥—Ä–æ–º–∫–æ—Å—Ç–∏
        const icon = volumeControl.querySelector('span');
        if (currentVolume === 0) {
          icon.textContent = 'üîá';
        } else if (currentVolume < 0.5) {
          icon.textContent = 'üîâ';
        } else {
          icon.textContent = 'üîä';
        }
      });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
      createVolumeControl();
      
      // –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
      const images = ['background.png', 'container-background.png', 'logo.png', 'startbutton.png'];
      images.forEach(src => {
        const img = new Image();
        img.src = src;
      });
      
      // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      window.formatRegexes = {
        numbers: /(\d+\.\s)/g,
        headers: /(Goal:|Action Plan:|‚ö†Ô∏è[^:]*:|‚úÖ[^:]*:|üî•[^:]*:|üß≠[^:]*:)/g,
        levels: /^(üî¥|üü†|üü°|üü¢|üíö|‚ö™|üü§)(.+)$/gm
      };
    });

    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
    function formatActionText(text) {
      if (!text) return '';
      
      return text
        .replace(/(\d+\.\s)/g, '<strong>$1</strong>')
        .replace(/(Goal:|Action Plan:|‚ö†Ô∏è[^:]*:|‚úÖ[^:]*:|üî•[^:]*:|üß≠[^:]*:)/g, '<strong>$1</strong>')
        .replace(/^(üî¥|üü†|üü°|üü¢|üíö|‚ö™|üü§)(.+)$/gm, '<div class="level-highlight"><strong>$1$2</strong></div>');
    }

    console.log('Flow Game loaded successfully');
  </script>
</body>
</html>
